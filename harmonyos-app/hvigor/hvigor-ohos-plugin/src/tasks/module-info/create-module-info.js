"use strict";var __decorate=this&&this.__decorate||function(t,e,o,r){var s,i=arguments.length,_=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)_=Reflect.decorate(t,e,o,r);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(_=(i<3?s(_):i>3?s(e,o,_):s(e,o))||_);return i>3&&_&&Object.defineProperty(e,o,_),_},__importDefault=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.CreateModuleInfo=exports.MODULE_INFO_CODE=void 0;const path_1=__importDefault(require("path")),hvigor_1=require("@ohos/hvigor"),fs_extra_1=__importDefault(require("fs-extra")),task_names_js_1=require("../common/task-names.js"),ohos_hap_task_js_1=require("../task/ohos-hap-task.js"),ohos_uitransform_optimization_js_1=require("./ohos-uitransform-optimization.js");exports.MODULE_INFO_CODE="\n//@ts-noCheck\nexport const __MODULE_NAME__: string = __getCurrentModuleName__()\nexport const __BUNDLE_NAME__: string = __getCurrentBundleName__()\n";class CreateModuleInfo extends ohos_hap_task_js_1.OhosHapTask{constructor(t){super(t,task_names_js_1.TaskNames.CommonTask.CREATE_MODULE_INFO),this.outputFile=this.pathInfo.getGenerateModuleInfoPath()}beforeTask(){fs_extra_1.default.existsSync(this.outputFile)&&fs_extra_1.default.removeSync(this.outputFile)}get ohosUiTransformOptimization(){return(0,ohos_uitransform_optimization_js_1.getOhosUiTransformOptimization)(this.targetService)}taskShouldDo(){return(0,ohos_uitransform_optimization_js_1.getOhosUiTransformOptimization)(this.targetService)}async doTaskAction(){fs_extra_1.default.ensureDirSync(path_1.default.dirname(this.outputFile)),fs_extra_1.default.writeFileSync(this.outputFile,exports.MODULE_INFO_CODE,{encoding:"utf-8"})}initTaskDepends(){}}__decorate([(0,hvigor_1.OutputFile)({isDirectory:!1})],CreateModuleInfo.prototype,"outputFile",void 0),__decorate([(0,hvigor_1.Input)()],CreateModuleInfo.prototype,"ohosUiTransformOptimization",null),exports.CreateModuleInfo=CreateModuleInfo;