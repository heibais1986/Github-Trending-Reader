"use strict";var __decorate=this&&this.__decorate||function(e,t,o,s){var a,r=arguments.length,n=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,o):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,o,s);else for(var _=e.length-1;_>=0;_--)(a=e[_])&&(n=(r<3?a(n):r>3?a(t,o,n):a(t,o))||n);return r>3&&n&&Object.defineProperty(t,o,n),n},__importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.GeneratePkgModuleJson=void 0;const task_names_js_1=require("./common/task-names.js"),ohos_hap_task_js_1=require("./task/ohos-hap-task.js");var Task=task_names_js_1.TaskNames.Task;const hvigor_1=require("@ohos/hvigor"),fs_extra_1=__importDefault(require("fs-extra")),path_1=__importDefault(require("path")),common_const_js_1=require("../const/common-const.js");class GeneratePkgModuleJson extends ohos_hap_task_js_1.OhosHapTask{constructor(e){super(e,Task.GENERATE_PKG_MODULE_JSON);const t=this.targetService.getTargetData().getPathInfo();this.jsonPath=path_1.default.resolve(t.getIntermediatesRes(),common_const_js_1.CommonConst.MODULE_JSON),this.packageHapJsonPath=path_1.default.resolve(this.pathInfo.getPackageHapProductPath(),common_const_js_1.CommonConst.MODULE_JSON)}async doTaskAction(){const e=this.pathInfo.getPackageHapProductPath();fs_extra_1.default.existsSync(e)||fs_extra_1.default.ensureDirSync(e),fs_extra_1.default.existsSync(this.jsonPath)&&fs_extra_1.default.copyFileSync(this.jsonPath,this.packageHapJsonPath)}initTaskDepends(){}}__decorate([(0,hvigor_1.InputFile)()],GeneratePkgModuleJson.prototype,"jsonPath",void 0),__decorate([(0,hvigor_1.OutputFile)()],GeneratePkgModuleJson.prototype,"packageHapJsonPath",void 0),exports.GeneratePkgModuleJson=GeneratePkgModuleJson;