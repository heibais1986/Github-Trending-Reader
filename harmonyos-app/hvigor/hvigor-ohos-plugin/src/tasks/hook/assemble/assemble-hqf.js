"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.AssembleHqf=void 0;const path_1=__importDefault(require("path")),hvigor_1=require("@ohos/hvigor"),fs_extra_1=__importDefault(require("fs-extra")),task_names_js_1=require("../../common/task-names.js"),prepare_quickfix_js_1=require("../../prepare-quickfix.js"),abstract_module_hook_task_js_1=require("../abstract-module-hook-task.js");class AssembleHqf extends abstract_module_hook_task_js_1.AbstractModuleHookTask{constructor(e){super(e,!1,task_names_js_1.TaskNames.CommonHookTask.ASSEMBLE_HQF),this.registryAction=()=>async()=>{const e=path_1.default.resolve(hvigor_1.PathUtil.getHvigorCacheDir(),"outputs","patch","patch.json");let s=await prepare_quickfix_js_1.PrepareQuickfix.getCurrentHqfVersion();AssembleHqf.isAdd&&(s+=1,AssembleHqf.isAdd=!1,await fs_extra_1.default.ensureDir(path_1.default.dirname(e)),await fs_extra_1.default.writeJSON(e,{patchVersionCode:s}))}}initTaskDepends(e){throw new Error("Method not implemented.")}}exports.AssembleHqf=AssembleHqf,AssembleHqf.isAdd=!0,AssembleHqf.versionCode=void 0;