"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ohosTrace=void 0;const hvigor_1=require("@ohos/hvigor");class OhosTrace{constructor(){this.data={MODULES:[],NATIVE_COMPILER:"Default"},hvigor_1.hvigor.buildFinished(()=>{exports.ohosTrace.transmitDataToManager()})}transmitDataToManager(){hvigor_1.TraceManager.trace(OhosTrace.TRACE_KEY,this.data,()=>{var e,t;null===(t=null===(e=this.data)||void 0===e?void 0:e.MODULES)||void 0===t||t.forEach(e=>{delete e.RESTOOL_COMPRESSION,delete e.INCREMENTAL_TASKS})})}traceBuildMode(e){var t,o;const a=null===(t=hvigor_1.globalData.cliEnv.configProps)||void 0===t?void 0:t.get("prop");a&&(this.data.BUILD_MODE=null!==(o=a.get("buildMode"))&&void 0!==o?o:e)}traceNativeCompiler(e){this.data.NATIVE_COMPILER=null!=e?e:"Default"}traceModules(e,t){const o=hvigor_1.TraceManager.anonymize(e),a=this.data.MODULES.filter(e=>e.MODULE_NAME!==o);a.push({MODULE_NAME:o,API_TYPE:t}),this.data.MODULES=a}getModule(e){if(!e)return;const t=hvigor_1.TraceManager.anonymize(e);return this.data.MODULES.find(e=>e.MODULE_NAME===t)}traceRestoolCompression(e,t){const o=this.getModule(e);o&&(o.RESTOOL_COMPRESSION=t)}traceIncrement(e,t,o){var a;const r=this.getModule(e);r&&(r.INCREMENTAL_TASKS=null!==(a=r.INCREMENTAL_TASKS)&&void 0!==a?a:{},r.INCREMENTAL_TASKS[t]=o)}traceIsUseCompilePlugin(e){const t=this.getModule(e);t&&(t.IS_USE_COMPILE_PLUGIN=!0)}traceIsUseTransformLib(e){const t=this.getModule(e);t&&(t.IS_USE_TRANSFORMLIB=!0)}traceUseNormalizedOHMUrl(e){this.data.USE_NORMALIZED_OHMURL=e}traceIsAutoLazyImport(e,t){const o=this.getModule(e);o&&(o.IS_AUTO_LAZY_IMPORT=t)}}OhosTrace.TRACE_KEY="HVIGOR_OHOS_PLUGIN",exports.ohosTrace=new OhosTrace;