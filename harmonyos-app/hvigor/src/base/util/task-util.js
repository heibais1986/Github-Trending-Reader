"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getAlignTarget=exports.markTaskExecuteSuccessful=exports.isIncrementalTask=void 0;const const_js_1=require("../../common/const/const.js"),hvigor_core_js_1=require("../external/core/hvigor-core.js"),hvigor_js_1=require("../external/core/hvigor.js"),incremental_exec_task_js_1=require("../external/task/incremental-exec-task.js"),incremental_task_js_1=require("../external/task/incremental-task.js"),task_proxy_manager_js_1=require("../internal/task/proxy/task-proxy-manager.js"),hvigor_log_js_1=require("../log/hvigor-log.js"),log=hvigor_log_js_1.HvigorLogger.getLogger("task-util");function isIncrementalTask(e){var t;if(null!==(t=hvigor_core_js_1.hvigorCore.getParameter().getProperty(const_js_1.INCREMENTAL_INPUT_OUTPUT_CACHE))&&void 0!==t&&t)return e instanceof incremental_task_js_1.IncrementalTask;{if(!(e instanceof incremental_task_js_1.IncrementalTask))return!1;const t=e.declareInputs(),r=e.declareInputFiles(),s=e.declareOutputFiles(),a=0===t.size&&0===r.collect().size&&0===s.collect().size;return e instanceof incremental_exec_task_js_1.IncrementalExecTask?!(""===e.declareExecutionTool()&&""===e.declareExecutionCommand()&&0===e.declareExecutionEnv().size&&a):(a&&log.debug(`${e.getPath()} is declared as IncrementTask, but does not implement any incremental method.`),!a)}}function markTaskExecuteSuccessful(e){var t,r;e.getEnabled()&&e.taskShouldDo()&&isIncrementalTask(e)&&(null===(r=null===(t=task_proxy_manager_js_1.taskProxyManager.getTaskProxy(e.getPath()))||void 0===t?void 0:t.getCurTaskSnapShot())||void 0===r||r.setExecutedSuccessful())}function getAlignTarget(){return hvigor_js_1.hvigor.getParameter().getProperty("ohos.align.target")}exports.isIncrementalTask=isIncrementalTask,exports.markTaskExecuteSuccessful=markTaskExecuteSuccessful,exports.getAlignTarget=getAlignTarget;