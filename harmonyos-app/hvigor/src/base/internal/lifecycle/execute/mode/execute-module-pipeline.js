"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ExecuteModulePipeline=void 0;const path_1=__importDefault(require("path")),index_js_1=require("../../../../../../index.js"),node_config_path_info_js_1=require("../../../../../common/node-config-path-info.js"),hvigor_log_js_1=require("../../../../log/hvigor-log.js"),sync_js_1=require("../../sync.js"),abstract_execute_pipeline_js_1=require("./abstract-execute-pipeline.js"),_log=hvigor_log_js_1.HvigorLogger.getLogger("hvigor-module-pipeline");class ExecuteModulePipeline extends abstract_execute_pipeline_js_1.AbstractExecutePipeline{constructor(e,t){super(e,t),this.executeModules=[],this.init()}init(){const e=index_js_1.hvigorCore.getExtraConfig().get("module");void 0===e?this.executeModules=this.project.getAllSubModules():(this.shouldCheckTask=!0,e.split(",").forEach(e=>{const t=e.split("@")[0],i=this.project.findModuleByName(t);void 0===i&&(node_config_path_info_js_1.nodeConfigPathInfo.checkExcludeNode(t)&&_log.printErrorExit("UNKNOWN_MODULE_IN_COMMAND_LINE_HVIGORCONFIG",[t,path_1.default.resolve(this.project.getNodeDir(),"hvigorconfig.ts")]),_log.printErrorExit("UNKNOWN_MODULE_IN_COMMAND_LINE_BUILD_PROFILE",[t,this.project.getBuildProfilePath()])),this.executeModules.push(i)}))}findPipeAllNeedExecuteSyncTasks(){const e=[];return this.executeModules.forEach(t=>{e.push(...(0,sync_js_1.findSyncTaskPathsForNode)(t))}),e}findPipeAllNeedExecuteTasks(){return this.findAllNeedExecuteTasksForNodes([...this.executeModules])}recordTraceData(){}}exports.ExecuteModulePipeline=ExecuteModulePipeline;