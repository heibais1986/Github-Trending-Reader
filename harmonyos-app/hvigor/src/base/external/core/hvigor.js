"use strict";var __decorate=this&&this.__decorate||function(o,r,e,t){var i,_=arguments.length,a=_<3?r:null===t?t=Object.getOwnPropertyDescriptor(r,e):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(o,r,e,t);else for(var g=o.length-1;g>=0;g--)(i=o[g])&&(a=(_<3?i(a):_>3?i(r,e,a):i(r,e))||a);return _>3&&a&&Object.defineProperty(r,e,a),a};Object.defineProperty(exports,"__esModule",{value:!0}),exports.hvigor=exports.Hvigor=void 0;const hvigor_trace_factory_js_1=require("../../common/trace/hvigor-trace-factory.js"),hvigor_lifecycle_hook_js_1=require("../../internal/lifecycle/hook/hvigor-lifecycle-hook.js"),hvigor_log_js_1=require("../../log/hvigor-log.js"),hvigor_config_js_1=require("./hvigor-config.js"),hvigor_core_js_1=require("./hvigor-core.js"),_log=hvigor_log_js_1.HvigorLogger.getLogger("hvigor");class Hvigor{constructor(){this.hvigorLifecycleHook=hvigor_lifecycle_hook_js_1.HvigorLifecycleHook.getInstance()}getRootNode(){var o;const r=null===(o=hvigor_core_js_1.hvigorCore.getProject())||void 0===o?void 0:o.getBuildFilePath();if(void 0===r)throw _log.printErrorExit("HVIGOR_CONFIG_FILE_ERROR",["hvigorfile.ts or hvigorconfig.ts"]),new Error("The root node is not yet available for build.");const e=hvigor_core_js_1.hvigorCore.getHvigorNodeByScriptPath(r);if(void 0===e)throw _log.printErrorExit("HVIGOR_CONFIG_FILE_ERROR",[r]),new Error("The root node is not yet available for build.");return e}getAllNodes(){var o;const r=this.getRootNode(),e=null===(o=hvigor_core_js_1.hvigorCore.getProject())||void 0===o?void 0:o.getBuildFilePath();if(void 0===e)throw _log.printErrorExit("HVIGOR_CONFIG_FILE_ERROR",["hvigorfile.ts or hvigorconfig.ts"]),new Error("rootNode not found.");const t=hvigor_core_js_1.hvigorCore.getSubNodeByScriptPath(e);return void 0===t?[r]:(t.push(r),t)}getNodeByName(o,r){return r?exports.hvigor.getAllNodes().find(e=>{const t=e.getNodeName()===o,i=void 0===r||e.classKind===r;return t&&i}):this.getAllNodes().find(r=>r.getNodeName()===o)}getHvigorConfig(){return hvigor_config_js_1.hvigorConfig||_log.printErrorExit("HVIGOR_CONFIG_NOT_AVAILABLE"),hvigor_config_js_1.hvigorConfig}getParameter(){return hvigor_core_js_1.hvigorCore.getParameter()}beforeNodeEvaluate(o){this.hvigorLifecycleHook.beforeNodeEvaluate(o)}afterNodeEvaluate(o){this.hvigorLifecycleHook.afterNodeEvaluate(o)}configEvaluated(o){this.hvigorLifecycleHook.configEvaluated(o)}nodesInitialized(o){this.hvigorLifecycleHook.nodesInitialized(o)}nodesEvaluated(o){this.hvigorLifecycleHook.nodesEvaluated(o)}taskGraphResolved(o){this.hvigorLifecycleHook.taskGraphResolved(o)}buildFinished(o){this.hvigorLifecycleHook.buildFinished(o)}onWatchWorkerMessage(o){return this.hvigorLifecycleHook.onWatchWorkerMessage(o)}getCommandEntryTask(){return hvigor_core_js_1.hvigorCore.getCommandEntryTasks()}isCommandEntryTask(o){return hvigor_core_js_1.hvigorCore.isCommandEntryTask(o)}getExtraConfig(){return hvigor_core_js_1.hvigorCore.getExtraConfig()}getProject(){return hvigor_core_js_1.hvigorCore.getProject()}}__decorate([hvigor_trace_factory_js_1.TrackAPI],Hvigor.prototype,"getRootNode",null),__decorate([hvigor_trace_factory_js_1.TrackAPI],Hvigor.prototype,"getAllNodes",null),__decorate([hvigor_trace_factory_js_1.TrackAPI],Hvigor.prototype,"getNodeByName",null),__decorate([hvigor_trace_factory_js_1.TrackAPI],Hvigor.prototype,"getHvigorConfig",null),__decorate([hvigor_trace_factory_js_1.TrackAPI],Hvigor.prototype,"getParameter",null),__decorate([hvigor_trace_factory_js_1.TrackAPI],Hvigor.prototype,"beforeNodeEvaluate",null),__decorate([hvigor_trace_factory_js_1.TrackAPI],Hvigor.prototype,"afterNodeEvaluate",null),__decorate([hvigor_trace_factory_js_1.TrackAPI],Hvigor.prototype,"configEvaluated",null),__decorate([hvigor_trace_factory_js_1.TrackAPI],Hvigor.prototype,"nodesInitialized",null),__decorate([hvigor_trace_factory_js_1.TrackAPI],Hvigor.prototype,"nodesEvaluated",null),__decorate([hvigor_trace_factory_js_1.TrackAPI],Hvigor.prototype,"taskGraphResolved",null),__decorate([hvigor_trace_factory_js_1.TrackAPI],Hvigor.prototype,"buildFinished",null),__decorate([hvigor_trace_factory_js_1.TrackAPI],Hvigor.prototype,"onWatchWorkerMessage",null),__decorate([hvigor_trace_factory_js_1.TrackAPI],Hvigor.prototype,"getCommandEntryTask",null),__decorate([hvigor_trace_factory_js_1.TrackAPI],Hvigor.prototype,"isCommandEntryTask",null),__decorate([hvigor_trace_factory_js_1.TrackAPI],Hvigor.prototype,"getExtraConfig",null),__decorate([hvigor_trace_factory_js_1.TrackAPI],Hvigor.prototype,"getProject",null),exports.Hvigor=Hvigor,exports.hvigor=new Hvigor;